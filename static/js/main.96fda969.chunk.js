(this["webpackJsonpreact_list-of-posts"]=this["webpackJsonpreact_list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(1),s=n.n(c),o=n(8),a=n.n(o),r=n(2),i=(n(15),n(10)),u=(n(16),n(7)),l=n.n(u),j=n(9),b="https://bloggy-api.herokuapp.com";function d(t,e){return m.apply(this,arguments)}function m(){return(m=Object(j.a)(l.a.mark((function t(e,n){var c,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e,n);case 2:if((c=t.sent).ok){t.next=5;break}throw new Error("".concat(c.status," - ").concat(c.statusText));case 5:return t.next=7,c.json();case 7:return s=t.sent,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var O=n(4),h=(n(18),n(0));function p(t){var e=t.handleCreatePostButton,n=t.setNewPost,c=t.newPost;return Object(h.jsxs)("form",{action:"POST",children:[Object(h.jsx)("input",{type:"text",value:c.title,onChange:function(t){return n((function(e){return Object(O.a)(Object(O.a)({},e),{},{title:t.target.value})}))}}),Object(h.jsx)("input",{type:"text",value:c.body,onChange:function(t){return n((function(e){return Object(O.a)(Object(O.a)({},e),{},{body:t.target.value})}))}}),Object(h.jsx)("button",{type:"button",onClick:e,children:"Create"})]})}function f(t){var e=t.setPostId,n=Object(c.useState)([]),s=Object(r.a)(n,2),o=s[0],a=s[1],u=Object(c.useState)(""),l=Object(r.a)(u,2),j=l[0],m=l[1],O=Object(c.useState)({title:"",body:""}),f=Object(r.a)(O,2),x=f[0],_=f[1];Object(c.useEffect)((function(){d("".concat(b,"/posts")).then((function(t){return a(t)}))}),[]);var v=function(t){(function(t){return d("".concat(b,"/posts/").concat(t),{method:"DELETE"})})(t).then(a((function(e){return e.filter((function(e){return t!==e.id}))})))};return Object(h.jsxs)("div",{className:"PostsList",children:[Object(h.jsx)("h2",{children:"Posts:"}),Object(h.jsx)(p,{handleCreatePostButton:function(){(function(t){return d("".concat(b,"/posts"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})})(x).then((function(t){a([].concat(Object(i.a)(o),[t])),_({title:"",body:""})}))},setNewPost:_,newPost:x}),Object(h.jsx)("ul",{className:"PostsList__list",children:o.map((function(t){return Object(h.jsxs)("li",{className:"PostList__item",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("b",{children:"[Post]"}),t.title||"No title"]}),t.id!==j?Object(h.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return n=t.id,m(n),void e(n);var n},children:"Open"}):Object(h.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return m(""),void e(null)},children:"Close"}),Object(h.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return v(t.id)},children:"Delete post"})]},t.id)}))})]})}n(20),n(21);function x(t){var e=t.postId,n=Object(c.useState)(""),s=Object(r.a)(n,2),o=s[0],a=s[1],i=Object(c.useState)(""),u=Object(r.a)(i,2),l=u[0],j=u[1],m=Object(c.useState)(""),O=Object(r.a)(m,2),p=O[0],f=O[1],x=function(t,e){e(t.target.value)};return Object(h.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){var n;t.preventDefault(),n={postId:e,name:o,email:l,body:p},d("".concat(b,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)}),a(""),j(""),f("")},method:"POST",children:[Object(h.jsx)("div",{className:"form-field",children:Object(h.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:o,onChange:function(t){return x(t,a)}})}),Object(h.jsx)("div",{className:"form-field",children:Object(h.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:l,onChange:function(t){return x(t,j)}})}),Object(h.jsx)("div",{className:"form-field",children:Object(h.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:p,onChange:function(t){return x(t,f)}})}),Object(h.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}function _(t){var e=t.postId,n=Object(c.useState)([]),s=Object(r.a)(n,2),o=s[0],a=s[1],i=Object(c.useState)([]),u=Object(r.a)(i,2),l=u[0],j=u[1],m=function(t){(function(t){return d("".concat(b,"/comments/").concat(t),{method:"DELETE"})})(t).then(j((function(t){return t.filter((function(t){return e===t.postId}))})))};return Object(c.useEffect)((function(){(function(t){return d("".concat(b,"/posts/").concat(t))})(e).then(a),function(t){return d("".concat(b,"/comments")).then((function(e){return e.filter((function(e){return t===e.postId}))}))}(e).then(j)}),[]),Object(h.jsxs)("div",{className:"PostDetails",children:[Object(h.jsx)("h2",{children:"Post details:"}),Object(h.jsxs)("section",{className:"PostDetails__post",children:[Object(h.jsx)("p",{children:o.title}),Object(h.jsx)("p",{children:o.body})]}),Object(h.jsx)("section",{className:"PostDetails__comments",children:Object(h.jsx)("ul",{className:"PostDetails__list",children:l.map((function(t){return Object(h.jsxs)("li",{className:"PostDetails__list-item",children:[Object(h.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return m(t.id)},children:"X"}),Object(h.jsx)("p",{children:t.body})]},t.id)}))})}),Object(h.jsx)("section",{children:Object(h.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(h.jsx)(x,{postId:e})})})]})}var v=function(){var t=Object(c.useState)(null),e=Object(r.a)(t,2),n=e[0],s=e[1];return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)("header",{children:Object(h.jsx)("h1",{children:"List of Posts"})}),Object(h.jsxs)("main",{children:[Object(h.jsx)("div",{className:"App__sidebar",children:Object(h.jsx)(f,{setPostId:s})}),Object(h.jsx)("div",{className:"App__content",children:n&&Object(h.jsx)(_,{postId:n})})]})]})};a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.96fda969.chunk.js.map